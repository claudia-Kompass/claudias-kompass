<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>GLOBAL SOUL</title>

<style>
body {
  margin: 0;
  font-family: system-ui;
  background: linear-gradient(135deg,#0f1a2b,#16263f);
  color: #e8dcc0;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 40px 20px;
}

h1 {
  font-size: 40px;
  margin-bottom: 6px;
  letter-spacing: 2px;
  font-weight: 600;
  font-family: "Playfair Display", serif;
  color: #f3ead6;
}

.subtitle {
  font-size: 16px;
  opacity: 0.85;
  margin-bottom: 18px;
}

.claim-de {
  font-size: 17px;
  font-weight: 500;
  margin-bottom: 4px;
  color: #f3ead6;
}

.claim-en {
  font-size: 13px;
  font-style: italic;
  opacity: 0.55;
  margin-bottom: 22px;
}

.meta-info {
  font-size: 14px;
  opacity: 0.65;
  letter-spacing: 0.3px;
}

.meta-version {
  font-size: 12px;
  font-style: italic;
  margin-left: 6px;
}

h2 {
  font-size: 22px;
  margin-top: 50px;
  margin-bottom: 18px;
  border-bottom: 1px solid rgba(243,234,214,0.18);
  padding-bottom: 10px;
  color: #f3ead6;
}

.markets-line {
  font-size: 17px;
  font-weight: 500;
  margin: 6px 0;
  color: #e8dcc0;
}

.crypto-line {
  font-size: 18px;
  font-weight: 600;
  margin: 6px 0;
  color: white;
}

/* Ampel */
.ampel {
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  margin-right: 10px;
  box-shadow: 0 0 6px rgba(255,255,255,0.15);
}

.ampel.green { background:#2ecc71; box-shadow:0 0 10px rgba(46,204,113,0.6); }
.ampel.red { background:#e74c3c; box-shadow:0 0 10px rgba(231,76,60,0.6); }
.ampel.yellow { background:#f1c40f; box-shadow:0 0 10px rgba(241,196,15,0.6); }

.change-positive { color:#2ecc71; }
.change-negative { color:#e74c3c; }
.change-neutral { color:#f1c40f; }

.usd {
  opacity: 0.65;
  font-size: 16px;
  font-weight: 400;
}

.weather-location {
  font-size: 18px;
  font-weight: 500;
  color: rgba(232,220,192,0.85);
}

.weather-temp-main {
  font-size: 18px;
  font-weight: 500;
  color: #e8dcc0;
  margin: 4px 0;
}

.weather-condition {
  font-size: 13px;
  opacity: 0.6;
  margin-bottom: 18px;
}

.trend-grid {
  display: flex;
  gap: 32px;
  margin: 6px 0;
}

button {
  margin-top: 25px;
  padding: 12px 20px;
  background: #e8dcc0;
  border: none;
  cursor: pointer;
  font-weight: 600;
  border-radius: 6px;
  color: #0f1a2b;
}
</style>
</head>

<body>
<div class="container">

<h1>üåç GLOBAL SOUL</h1>
<div class="subtitle">Claudia‚Äôs Daily Compass</div>

<div class="claim-de">Zwischen Heimat und Horizont.</div>
<div class="claim-en">between home and horizon</div>

<div id="metaInfo" class="meta-info"></div>
<div id="content"></div>

<button onclick="loadData()">Neue Ausgabe</button>

</div>

<script>

function weatherIcon(code, time = "") {
  if (code === 0 && time === "21:00") return "üåô";
  if (code === 0) return "‚òÄÔ∏è";
  if (code === 1) return "üå§Ô∏è";
  if (code === 2) return "‚õÖ";
  if (code === 3) return "‚òÅÔ∏è";
  if (code >= 51 && code <= 67) return "üåßÔ∏è";
  if (code >= 71 && code <= 77) return "‚ùÑÔ∏è";
  return "‚òÅÔ∏è";
}

function cryptoDot(color) {
  return `<span class="dot ${color}"></span>`;
}

async function loadData() {
  const res = await fetch("/api/daily");
  const data = await res.json();

  const now = new Date();
  const dateString = now.toLocaleDateString("de-DE", {
    weekday: "long",
    year: "numeric",
    month: "2-digit",
    day: "2-digit"
  });

  const timeString = now.toLocaleTimeString("de-DE", {
    hour: "2-digit",
    minute: "2-digit"
  });

  document.getElementById("metaInfo").innerHTML =
    `${dateString} ¬∑ ${timeString} Uhr ¬∑ v${data.version}`;

  const content = document.getElementById("content");

  content.innerHTML = `

  <div class="section">
    <h2>M√§rkte</h2>
    <div>DAX: ${data.dax.value} (${data.dax.change}%)</div>
  </div>

  <div class="section">
    <h2>Krypto</h2>
    <div>
      ${cryptoDot(data.crypto.bitcoin.ampel)}
      Bitcoin: ‚Ç¨${data.crypto.bitcoin.price.toFixed(0)}
      (${data.crypto.bitcoin.change.toFixed(2)}%)
    </div>
    <div>
      ${cryptoDot(data.crypto.nexo.ampel)}
      Nexo: ‚Ç¨${data.crypto.nexo.price.toFixed(3)}
      (${data.crypto.nexo.change.toFixed(2)}%)
    </div>
  </div>

  <div class="section">
    <h2>Wetter ‚Äì ${data.weather.location}</h2>
    <div class="weather-main">
      ${weatherIcon(data.weather.code)}
      ${data.weather.temp}¬∞C
    </div>

    <div class="trend">
      <div>09:00 ${weatherIcon(data.weather.trend.morning.code, "09:00")} ${Math.round(data.weather.trend.morning.temp)}¬∞C</div>
      <div>15:00 ${weatherIcon(data.weather.trend.afternoon.code, "15:00")} ${Math.round(data.weather.trend.afternoon.temp)}¬∞C</div>
      <div>21:00 ${weatherIcon(data.weather.trend.evening.code, "21:00")} ${Math.round(data.weather.trend.evening.temp)}¬∞C</div>
    </div>
  </div>

  <div class="section mood">
    ${data.mood}
  </div>

  `;
}

loadData();

</script>
</body>
</html>
