<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GLOBAL SOUL ‚Äì Claudia‚Äôs Daily Compass</title>

<style>
body {
  margin:0;
  background:#0f1115;
  color:#e6e6e6;
  font-family:Arial, sans-serif;
}

.container {
  max-width:760px;
  margin:40px auto;
  padding:40px;
  background:#171a21;
  border-radius:14px;
}

h1 {
  font-size:36px;
  color:#e8dcc0;
  margin-bottom:10px;
}

.meta {
  font-size:14px;
  opacity:0.8;
  margin-bottom:30px;
}

.section {
  margin-bottom:40px;
}

h2 {
  color:#f0d48a;
  font-size:20px;
  margin-bottom:15px;
}

.market-line {
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
}

.ampel {
  width:10px;
  height:10px;
  border-radius:50%;
  display:inline-block;
  margin-right:6px;
}

.green { background:#4caf50; }
.red { background:#e53935; }
.yellow { background:#fbc02d; }

button {
  background:#f0d48a;
  border:none;
  padding:10px 16px;
  border-radius:6px;
  cursor:pointer;
  margin-bottom:20px;
}
</style>
</head>

<body>

<div class="container">

<h1>üåç GLOBAL SOUL</h1>
<div>Claudia‚Äôs Daily Compass</div>
<div class="meta" id="metaInfo"></div>

<button onclick="loadData()">Neue Ausgabe</button>

<div id="content"></div>

</div>

<script>

function cryptoAmpel(change) {
  if (change > 1) return '<span class="ampel green"></span>';
  if (change < -1) return '<span class="ampel red"></span>';
  return '<span class="ampel yellow"></span>';
}

function weatherIcon(code) {
  if (code === 0) return "‚òÄÔ∏è";
  if (code < 3) return "üå§Ô∏è";
  if (code < 60) return "‚òÅÔ∏è";
  return "üåßÔ∏è";
}

async function loadData() {

  const res = await fetch('/api/daily');
  const data = await res.json();

  document.getElementById("metaInfo").innerHTML =
    `${data.timestamp} ¬∑ v${data.version}`;

  document.getElementById("content").innerHTML = `

  <div class="section">
    <h2>M√§rkte</h2>
    <div class="market-line">
      <div>DAX</div>
      <div>${data.markets.dax.value}</div>
    </div>
    <div style="font-size:12px;opacity:0.6;">
      ${data.markets.dax.date}
    </div>

    <div class="market-line" style="margin-top:10px;">
      <div>EUR/USD</div>
      <div>${data.markets.eurusd.value}</div>
    </div>
    <div style="font-size:12px;opacity:0.6;">
      ${data.markets.eurusd.date}
    </div>
  </div>

  <div class="section">
    <h2>Krypto (USD)</h2>

    <div class="market-line">
      <div>
        ${cryptoAmpel(data.crypto.bitcoin.change)}
        Bitcoin
      </div>
      <div>$${data.crypto.bitcoin.price.toFixed(0)}</div>
    </div>

    <div class="market-line">
      <div>
        ${cryptoAmpel(data.crypto.nexo.change)}
        Nexo
      </div>
      <div>$${data.crypto.nexo.price.toFixed(2)}</div>
    </div>
  </div>

  <div class="section">
    <h2>Wetter ‚Äì ${data.weather.location}</h2>
    <div style="font-size:18px;">
      ${weatherIcon(data.weather.code)}
      ${Math.round(data.weather.temp)}¬∞C
    </div>
  </div>
  `;
}

loadData();
</script>

</body>
</html>
