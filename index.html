<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Global Soul</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#0d2740,#1b3d5c);
  color: #f4f4f4;
  padding: 30px;
}

h1 {
  font-size: 42px;
  letter-spacing: 3px;
  text-shadow: 0 0 12px rgba(255,255,200,0.5);
}

.section {
  margin-top: 40px;
}

hr {
  border: none;
  border-top: 1px solid rgba(255,255,255,0.2);
  margin: 10px 0 20px 0;
}

.ampel {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 10px;
}

.green { background: #00ff88; }
.red { background: #ff4d4d; }
.yellow { background: #ffd633; }

.weather-grid {
  display: flex;
  gap: 40px;
  margin-top: 20px;
}

.weather-slot {
  text-align: center;
}

.icon {
  font-size: 28px;
}

</style>
</head>
<body>

<h1>üåç GLOBAL SOUL</h1>
<div id="meta"></div>

<div class="section">
<h2>M√§rkte</h2>
<hr>
<div>DAX: <span id="dax"></span></div>
<div>EUR/USD: <span id="eurusd"></span></div>
</div>

<div class="section">
<h2>Krypto</h2>
<hr>
<div>
<span id="btcAmpel"></span>
Bitcoin: <span id="btc"></span>
</div>
<div>
<span id="nexoAmpel"></span>
Nexo: <span id="nexo"></span>
</div>
</div>

<div class="section">
<h2>Wetter ‚Äì Ilshofen</h2>
<hr>
<div style="font-size:22px;">
<span id="weatherIcon"></span>
Jetzt: <span id="weatherNow"></span>
</div>

<div class="weather-grid">
<div class="weather-slot">
<div id="morningIcon" class="icon"></div>
<div id="morning"></div>
</div>
<div class="weather-slot">
<div id="afternoonIcon" class="icon"></div>
<div id="afternoon"></div>
</div>
<div class="weather-slot">
<div id="eveningIcon" class="icon"></div>
<div id="evening"></div>
</div>
</div>
</div>

<script>

function ampel(change) {
  if (change > 1) return '<span class="ampel green"></span>';
  if (change < -1) return '<span class="ampel red"></span>';
  return '<span class="ampel yellow"></span>';
}

function weatherIcon(code) {
  if (code === 0) return "‚òÄÔ∏è";
  if (code <= 3) return "‚õÖ";
  if (code <= 48) return "‚òÅÔ∏è";
  if (code <= 67) return "üåßÔ∏è";
  if (code <= 77) return "‚ùÑÔ∏è";
  return "üå¶Ô∏è";
}

fetch("/api/daily")
.then(res => res.json())
.then(data => {

  const now = new Date();
  document.getElementById("meta").innerText =
    now.toLocaleDateString("de-DE",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"}) +
    " ¬∑ " +
    now.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}) +
    " Uhr ¬∑ v" + data.version;

  document.getElementById("dax").innerText = data.markets.dax;
  document.getElementById("eurusd").innerText = data.markets.eurusd.toFixed(2);

  document.getElementById("btc").innerText =
    "‚Ç¨ " + data.crypto.bitcoin.eur.toLocaleString() +
    " (‚âà $" + data.crypto.bitcoin.usd.toLocaleString() + ")";

  document.getElementById("nexo").innerText =
    "‚Ç¨ " + data.crypto.nexo.eur.toFixed(3) +
    " (‚âà $" + data.crypto.nexo.usd.toFixed(2) + ")";

  document.getElementById("btcAmpel").innerHTML =
    ampel(data.crypto.bitcoin.change);

  document.getElementById("nexoAmpel").innerHTML =
    ampel(data.crypto.nexo.change);

  document.getElementById("weatherNow").innerText =
    data.weather.temp + "¬∞C";

  document.getElementById("weatherIcon").innerText =
    weatherIcon(data.weather.code);

  document.getElementById("morning").innerText =
    "09:00 " + data.weather.trend.morning.temp + "¬∞C";
  document.getElementById("afternoon").innerText =
    "15:00 " + data.weather.trend.afternoon.temp + "¬∞C";
  document.getElementById("evening").innerText =
    "21:00 " + data.weather.trend.evening.temp + "¬∞C";

  document.getElementById("morningIcon").innerText =
    weatherIcon(data.weather.trend.morning.code);
  document.getElementById("afternoonIcon").innerText =
    weatherIcon(data.weather.trend.afternoon.code);
  document.getElementById("eveningIcon").innerText =
    weatherIcon(data.weather.trend.evening.code);

});
</script>

</body>
</html>
