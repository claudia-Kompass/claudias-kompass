<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GLOBAL SOUL</title>

<style>
body {
  margin:0;
  font-family: system-ui, sans-serif;
  background: linear-gradient(180deg,#0d2742,#143a5b);
  color:#f1e9d2;
  padding:40px 20px;
}

h1 {
  font-size:48px;
  letter-spacing:2px;
  text-shadow:0 0 20px rgba(255,255,200,0.5);
  margin:0;
}

.sub {
  margin-top:5px;
  font-size:18px;
}

.claim {
  margin-top:10px;
  font-size:20px;
}

.meta {
  margin-top:5px;
  font-size:14px;
  opacity:0.8;
}

button {
  margin-top:20px;
  padding:10px 18px;
  border:none;
  border-radius:8px;
  background:#e7c97f;
  font-weight:600;
  cursor:pointer;
}

.section {
  margin-top:50px;
}

.section h2 {
  border-bottom:1px solid rgba(255,255,255,0.2);
  padding-bottom:10px;
}

.row {
  display:flex;
  align-items:center;
  justify-content:space-between;
  max-width:500px;
  margin-top:8px;
  font-size:18px;
}

.left {
  display:flex;
  gap:15px;
}

.ampel {
  width:14px;
  height:14px;
  border-radius:50%;
  display:inline-block;
}

.green { background:#1fd655; box-shadow:0 0 12px #1fd655; }
.yellow { background:#ffd500; box-shadow:0 0 12px #ffd500; }
.red { background:#ff3c3c; box-shadow:0 0 12px #ff3c3c; }

a {
  color:#ffd500;
  text-decoration:none;
  font-weight:500;
}

.weather-hours {
  display:flex;
  gap:40px;
  margin-top:10px;
}
</style>
</head>

<body>

<h1>üåç GLOBAL SOUL</h1>
<div class="sub">Claudia‚Äôs Daily Compass</div>
<div class="claim">Zwischen Heimat und Horizont.</div>
<div class="meta" id="meta"></div>

<button onclick="location.reload()">Neue Ausgabe</button>

<div class="section">
<h2>M√§rkte</h2>

<div class="row">
  <div class="left">
    <span>DAX:</span>
    <span id="dax"></span>
  </div>
  <span class="ampel yellow"></span>
</div>

<div class="row">
  <div class="left">
    <span>EUR/USD:</span>
    <span id="eurusd"></span>
  </div>
  <span class="ampel yellow"></span>
</div>
</div>

<div class="section">
<h2>Krypto</h2>

<div class="row">
  <div class="left">
    <span>Bitcoin:</span>
    <span id="btc"></span>
  </div>
  <div>
    <span id="btcAmpel"></span>
    <a href="https://www.coingecko.com/de/coins/bitcoin" target="_blank">Info</a>
  </div>
</div>

<div class="row">
  <div class="left">
    <span>Nexo:</span>
    <span id="nexo"></span>
  </div>
  <div>
    <span id="nexoAmpel"></span>
    <a href="https://www.coingecko.com/de/coins/nexo" target="_blank">Info</a>
  </div>
</div>
</div>

<div class="section">
<h2>Wetter ‚Äì Ilshofen</h2>

<div id="weatherNow"></div>

<div class="weather-hours">
  <div id="morning"></div>
  <div id="afternoon"></div>
  <div id="evening"></div>
</div>
</div>

<div class="section">
<h2>Finanzbericht</h2>
<div id="report"></div>
</div>

<script>
function ampel(change){
  if(change > 1) return '<span class="ampel green"></span>';
  if(change < -1) return '<span class="ampel red"></span>';
  return '<span class="ampel yellow"></span>';
}

fetch("/api/daily")
.then(res => res.json())
.then(data => {

  const now = new Date();
  document.getElementById("meta").innerText =
    now.toLocaleDateString("de-DE",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"}) +
    " ¬∑ " +
    now.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}) +
    " Uhr ¬∑ v" + data.version;

  document.getElementById("dax").innerText = data.markets.dax.value;
  document.getElementById("eurusd").innerText = data.markets.eurusd.toFixed(2);

  document.getElementById("btc").innerText =
    "‚Ç¨" + data.crypto.bitcoin.eur.toLocaleString() +
    " (‚âà $" + data.crypto.bitcoin.usd.toLocaleString() + ")";

  document.getElementById("nexo").innerText =
    "‚Ç¨" + data.crypto.nexo.eur.toFixed(3) +
    " (‚âà $" + data.crypto.nexo.usd.toFixed(2) + ")";

  document.getElementById("btcAmpel").innerHTML =
    ampel(data.crypto.bitcoin.eur_24h_change);

  document.getElementById("nexoAmpel").innerHTML =
    ampel(data.crypto.nexo.eur_24h_change);

  document.getElementById("weatherNow").innerText =
    data.weather.temp + "¬∞C";

  document.getElementById("morning").innerText =
    "09:00 " + data.weather.trend.morning.temp + "¬∞C";

  document.getElementById("afternoon").innerText =
    "15:00 " + data.weather.trend.afternoon.temp + "¬∞C";

  document.getElementById("evening").innerText =
    "21:00 " + data.weather.trend.evening.temp + "¬∞C";

  document.getElementById("report").innerText =
    "Bitcoin bewegt sich aktuell mit moderater Volatilit√§t. EUR/USD stabil. DAX seitw√§rts.";
});
</script>

</body>
</html>
