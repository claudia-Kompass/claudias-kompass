<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GLOBAL SOUL</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, sans-serif;
  background: linear-gradient(#0f2f4a,#1e4463);
  color:#e8e3d8;
  padding:40px 20px;
}

h1{
  font-size:48px;
  letter-spacing:3px;
  margin:0;
  text-shadow:0 0 20px rgba(255,255,200,0.4);
}

.subtitle{
  font-size:20px;
  margin-top:10px;
}

.meta{
  margin-top:5px;
  opacity:0.8;
}

button{
  margin-top:20px;
  padding:10px 20px;
  background:#e3c77c;
  border:none;
  border-radius:6px;
  font-weight:600;
  cursor:pointer;
}

.section{
  margin-top:50px;
}

.section h2{
  font-size:26px;
  border-bottom:1px solid rgba(255,255,255,0.2);
  padding-bottom:10px;
}

.row{
  margin-top:15px;
  font-size:18px;
  display:flex;
  align-items:center;
  gap:10px;
}

.ampel{
  width:14px;
  height:14px;
  border-radius:50%;
  display:inline-block;
}

.green{ background:#2ecc71; }
.yellow{ background:#f1c40f; }
.red{ background:#e74c3c; }

.info{
  color:#e3c77c;
  text-decoration:none;
  font-weight:400;
}
</style>
</head>

<body>

<h1>üåç GLOBAL SOUL</h1>
<div class="subtitle">Claudia‚Äôs Daily Compass</div>
<div id="meta" class="meta"></div>

<button onclick="location.reload()">Neue Ausgabe</button>

<div class="section">
  <h2>M√§rkte</h2>
  <div class="row">DAX: <span id="dax"></span></div>
  <div class="row">EUR/USD: <span id="eurusd"></span></div>
</div>

<div class="section">
  <h2>Krypto</h2>
  <div class="row">
    Bitcoin: <span id="btc"></span>
    <span id="btcAmpel"></span>
    <a class="info" href="https://www.coingecko.com/de/coins/bitcoin" target="_blank">Info</a>
  </div>

  <div class="row">
    Nexo: <span id="nexo"></span>
    <span id="nexoAmpel"></span>
    <a class="info" href="https://www.coingecko.com/de/coins/nexo" target="_blank">Info</a>
  </div>
</div>

<div class="section">
  <h2>Wetter ‚Äì Ilshofen</h2>
  <div class="row" id="weatherNow"></div>
  <div class="row" id="morning"></div>
  <div class="row" id="afternoon"></div>
  <div class="row" id="evening"></div>
</div>

<script>
function ampel(change){
  if(change > 1) return '<span class="ampel green"></span>';
  if(change < -1) return '<span class="ampel red"></span>';
  return '<span class="ampel yellow"></span>';
}

fetch("/api/daily")
.then(res=>res.json())
.then(data=>{

  const now=new Date();

  document.getElementById("meta").innerText=
    now.toLocaleDateString("de-DE",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"})+
    " ¬∑ "+
    now.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})+
    " Uhr ¬∑ v"+data.version;

  document.getElementById("dax").innerText=data.markets.dax;
  document.getElementById("eurusd").innerText=data.markets.eurusd.toFixed(2);

  document.getElementById("btc").innerText=
    "‚Ç¨ "+data.crypto.bitcoin.eur.toLocaleString()+
    " (‚âà $"+data.crypto.bitcoin.usd.toLocaleString()+")";

  document.getElementById("nexo").innerText=
    "‚Ç¨ "+data.crypto.nexo.eur.toFixed(3)+
    " (‚âà $"+data.crypto.nexo.usd.toFixed(2)+")";

  document.getElementById("btcAmpel").innerHTML=
    ampel(data.crypto.bitcoin.eur_24h_change);

  document.getElementById("nexoAmpel").innerHTML=
    ampel(data.crypto.nexo.eur_24h_change);

  document.getElementById("weatherNow").innerText=
    "Jetzt: "+data.weather.temp+"¬∞C";

  document.getElementById("morning").innerText=
    "09:00 "+data.weather.trend.morning.temp+"¬∞C";

  document.getElementById("afternoon").innerText=
    "15:00 "+data.weather.trend.afternoon.temp+"¬∞C";

  document.getElementById("evening").innerText=
    "21:00 "+data.weather.trend.evening.temp+"¬∞C";
});
</script>

</body>
</html>
