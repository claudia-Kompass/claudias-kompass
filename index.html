<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Global Soul</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#0e2a47 0%,#102f52 50%,#0c223b 100%);
  color: #f1e8d8;
}

/* ===== HERO ===== */
.hero {
  padding: 80px 40px 60px 40px;
}

.hero-inner {
  max-width: 900px;
}

h1 {
  font-size: 56px;
  margin: 0 0 10px 0;
  letter-spacing: 2px;
  text-shadow: 0 0 12px rgba(255,220,150,0.5);
}

.subtitle {
  font-size: 18px;
  margin: 0;
}

.tagline {
  margin-top: 15px;
  font-size: 20px;
}

.tagline span {
  font-style: italic;
  font-size: 16px;
  opacity: 0.7;
}

.meta {
  margin-top: 20px;
  font-size: 14px;
  opacity: 0.8;
}

button {
  margin-top: 25px;
  padding: 10px 18px;
  background: #e6d7b9;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

/* ===== CONTENT ===== */
.section {
  max-width: 900px;
  padding: 20px 40px;
}

.section h2 {
  margin-top: 40px;
  border-bottom: 1px solid rgba(255,255,255,0.2);
  padding-bottom: 8px;
}

/* Ampel */
.dot {
  height: 14px;
  width: 14px;
  border-radius: 50%;
  display: inline-block;
  margin-left: 8px;
}

.green { background: #2ecc71; box-shadow: 0 0 8px #2ecc71; }
.red { background: #e74c3c; box-shadow: 0 0 8px #e74c3c; }
.yellow { background: #f1c40f; box-shadow: 0 0 8px #f1c40f; }

/* Wetter */
.weather-now {
  font-size: 22px;
  margin-bottom: 15px;
}

.weather-trend {
  display: flex;
  gap: 40px;
}

.weather-block {
  text-align: center;
}

.weather-block div:first-child {
  font-size: 28px;
}
</style>
</head>

<body>

<header class="hero">
  <div class="hero-inner">
    <h1>üåç GLOBAL SOUL</h1>
    <p class="subtitle">Claudia‚Äôs Daily Compass</p>
    <p class="tagline">
      Zwischen Heimat und Horizont.<br>
      <span>between home and horizon</span>
    </p>
    <div id="metaInfo" class="meta"></div>
    <button onclick="loadData()">Neue Ausgabe</button>
  </div>
</header>

<div id="content" class="section"></div>

<script>
function trendDot(value){
  if(value > 0.2) return '<span class="dot green"></span>';
  if(value < -0.2) return '<span class="dot red"></span>';
  return '<span class="dot yellow"></span>';
}

function weatherIcon(code){
  if([0,1].includes(code)) return "‚òÄÔ∏è";
  if([2,3].includes(code)) return "‚õÖ";
  if([45,48].includes(code)) return "üå´Ô∏è";
  if([51,53,55,61,63,65,80,81,82].includes(code)) return "üåßÔ∏è";
  if([71,73,75,85,86].includes(code)) return "‚ùÑÔ∏è";
  return "‚òÅÔ∏è";
}

async function loadData(){
  const res = await fetch("/api/daily");
  const data = await res.json();

  const now = new Date();
  const date = now.toLocaleDateString("de-DE",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"});
  const time = now.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"});

  document.getElementById("metaInfo").innerHTML =
    `${date} ¬∑ ${time} Uhr ¬∑ v${data.version}`;

  document.getElementById("content").innerHTML = `

  <h2>M√§rkte</h2>
  <div>DAX: ${data.markets.dax.value} ${trendDot(data.markets.dax.change)}</div>
  <div>EUR/USD: ${data.markets.eurusd.value} ${trendDot(data.markets.eurusd.change)}</div>

  <h2>Krypto</h2>
  <div>Bitcoin: ‚Ç¨${data.markets.bitcoin.price.toFixed(0)} ${trendDot(data.markets.bitcoin.change)}</div>
  <div>Nexo: ‚Ç¨${data.markets.nexo.price.toFixed(3)} ${trendDot(data.markets.nexo.change)}</div>

  <h2>Wetter ‚Äì ${data.weather.location}</h2>
  <div class="weather-now">
    ${weatherIcon(data.weather.code)} ${data.weather.temp}¬∞C
  </div>

  <div class="weather-trend">
    <div class="weather-block">
      <div>${weatherIcon(data.weather.trend.morning.code)}</div>
      <div>09:00</div>
      <div>${Math.round(data.weather.trend.morning.temp)}¬∞C</div>
    </div>
    <div class="weather-block">
      <div>${weatherIcon(data.weather.trend.afternoon.code)}</div>
      <div>15:00</div>
      <div>${Math.round(data.weather.trend.afternoon.temp)}¬∞C</div>
    </div>
    <div class="weather-block">
      <div>${weatherIcon(data.weather.trend.evening.code)}</div>
      <div>21:00</div>
      <div>${Math.round(data.weather.trend.evening.temp)}¬∞C</div>
    </div>
  </div>
  `;
}

loadData();
</script>

</body>
</html>
