<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Global Soul</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#0d1f33,#163a5c);
  color: #f5f1e6;
  padding: 40px;
}

h1 {
  font-size: 48px;
  letter-spacing: 3px;
  text-shadow: 0 0 20px rgba(255,215,150,0.6);
}

.section {
  margin-top: 50px;
}

hr {
  border: none;
  border-top: 1px solid rgba(255,255,255,0.2);
  margin: 10px 0 20px 0;
}

.ampel {
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  margin-left: 10px;
  box-shadow: 0 0 10px currentColor;
}

.green { background: #00ff88; color: #00ff88; }
.yellow { background: #ffd000; color: #ffd000; }
.red { background: #ff3b3b; color: #ff3b3b; }

.info-link {
  color: #f4d27a;
  font-weight: 600;
  margin-left: 10px;
  text-decoration: none;
}

.info-link:hover {
  color: #ffffff;
  text-shadow: 0 0 8px #f4d27a;
}

button {
  background: #f4d27a;
  border: none;
  padding: 10px 18px;
  margin-top: 20px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

.weather-trend {
  display: flex;
  gap: 40px;
  margin-top: 15px;
}
</style>
</head>

<body>

<h1>üåç GLOBAL SOUL</h1>
<div>Claudia‚Äôs Daily Compass</div>
<div><i>Zwischen Heimat und Horizont.</i></div>
<div id="meta"></div>

<button onclick="loadData()">Neue Ausgabe</button>

<div id="content"></div>

<script>

function ampel(change){
  if(change > 0.5) return '<span class="ampel green"></span>';
  if(change < -0.5) return '<span class="ampel red"></span>';
  return '<span class="ampel yellow"></span>';
}

function weatherIcon(code){
  if(code === 0) return "‚òÄÔ∏è";
  if(code < 3) return "üå§Ô∏è";
  if(code < 50) return "‚òÅÔ∏è";
  if(code < 70) return "üåßÔ∏è";
  return "‚ùÑÔ∏è";
}

async function loadData(){
  const res = await fetch("/api/daily");
  const data = await res.json();

  document.getElementById("meta").innerHTML =
    `${data.dateString} ¬∑ ${data.timeString} Uhr ¬∑ v${data.version}`;

  document.getElementById("content").innerHTML = `

  <div class="section">
    <h2>M√§rkte</h2>
    <hr>
    DAX: ${data.markets.dax.value}
    ${ampel(data.markets.dax.change)}
    <br>
    EUR/USD: ${data.markets.eurusd.value}
    ${ampel(data.markets.eurusd.change)}
  </div>

  <div class="section">
    <h2>Krypto</h2>
    <hr>
    Bitcoin: ‚Ç¨${data.crypto.bitcoin.eur.toFixed(0)}
    (‚âà $${data.crypto.bitcoin.usd.toFixed(0)})
    ${ampel(data.crypto.bitcoin.change)}
    <a class="info-link"
       target="_blank"
       href="https://www.coingecko.com/de/coins/bitcoin">
       Info
    </a>
    <br><br>
    Nexo: ‚Ç¨${data.crypto.nexo.eur.toFixed(3)}
    (‚âà $${data.crypto.nexo.usd.toFixed(2)})
    ${ampel(data.crypto.nexo.change)}
    <a class="info-link"
       target="_blank"
       href="https://www.coingecko.com/de/coins/nexo">
       Info
    </a>
  </div>

  <div class="section">
    <h2>Wetter ‚Äì ${data.weather.location}</h2>
    <hr>
    ${weatherIcon(data.weather.code)}
    ${data.weather.temp}¬∞C

    <div class="weather-trend">
      <div>
        09:00<br>
        ${weatherIcon(data.weather.trend.morning.code)}<br>
        ${Math.round(data.weather.trend.morning.temp)}¬∞C
      </div>
      <div>
        15:00<br>
        ${weatherIcon(data.weather.trend.afternoon.code)}<br>
        ${Math.round(data.weather.trend.afternoon.temp)}¬∞C
      </div>
      <div>
        21:00<br>
        ${weatherIcon(data.weather.trend.evening.code)}<br>
        ${Math.round(data.weather.trend.evening.temp)}¬∞C
      </div>
    </div>
  </div>
  `;
}

loadData();

</script>

</body>
</html>
