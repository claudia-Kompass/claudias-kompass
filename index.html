<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>GLOBAL SOUL</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(to bottom,#0b1d35,#163a5f);
  color:#e8dcc0;
}

.container{
  max-width:900px;
  margin:0 auto;
  padding:40px 20px;
}

.brand{
  font-family:'Playfair Display',serif;
  font-size:48px;
  letter-spacing:3px;
  text-shadow:0 0 25px rgba(240,212,138,0.25);
  margin-bottom:8px;
}

.subtitle{
  font-size:18px;
  font-style:italic;
  margin-bottom:16px;
}

.claim-de{font-size:18px;margin-bottom:4px;}
.claim-en{font-size:14px;opacity:0.7;margin-bottom:10px;}

.meta{
  margin-top:10px;
  margin-bottom:25px;
  font-size:14px;
  opacity:0.8;
}

button{
  padding:10px 18px;
  border:none;
  border-radius:8px;
  background:#e8dcc0;
  cursor:pointer;
}

h2{
  margin-top:50px;
  border-bottom:1px solid rgba(255,255,255,0.2);
  padding-bottom:8px;
}

.ampel{
  display:inline-block;
  width:14px;
  height:14px;
  border-radius:50%;
  margin-left:8px;
  box-shadow:0 0 10px rgba(255,255,255,0.5);
}

.green{background:#2ecc71;}
.red{background:#e74c3c;}
.yellow{background:#f1c40f;}

.weather-row{
  display:flex;
  gap:40px;
  margin-top:15px;
}
.weather-box{text-align:center;}
.weather-main{font-size:28px;margin-top:10px;}

.info-link{
  font-size:12px;
  margin-left:8px;
  opacity:0.7;
}
</style>
</head>

<body>
<div class="container">

<h1 class="brand">üåç GLOBAL SOUL</h1>
<div class="subtitle">Claudia‚Äôs Daily Compass</div>
<div class="claim-de">Zwischen Heimat und Horizont.</div>
<div class="claim-en">between home and horizon</div>
<div class="meta" id="metaInfo"></div>

<button onclick="loadData()">Neue Ausgabe</button>

<h2>M√§rkte</h2>
<div id="markets"></div>

<h2>Krypto</h2>
<div id="crypto"></div>

<h2>Wetter ‚Äì Ilshofen</h2>
<div id="weather"></div>

</div>

<script>
function ampel(change){
  if(change > 0.5) return "green";
  if(change < -0.5) return "red";
  return "yellow";
}

function weatherIcon(code){
  if(code === 0) return "‚òÄÔ∏è";
  if(code <= 3) return "‚õÖ";
  if(code <= 55) return "üåßÔ∏è";
  if(code <= 65) return "üåßÔ∏è";
  if(code <= 75) return "‚ùÑÔ∏è";
  return "‚òÅÔ∏è";
}

async function loadData(){
  const res = await fetch("/api/daily");
  const data = await res.json();

  document.getElementById("metaInfo").innerHTML =
    `${data.date} ¬∑ ${data.time} Uhr ¬∑ v${data.version}`;

  document.getElementById("markets").innerHTML = `
    DAX: ${data.markets.dax.value}
    <span class="ampel ${ampel(data.markets.dax.change)}"></span><br>
    EUR/USD: ${data.markets.eurusd.value}
    <span class="ampel ${ampel(data.markets.eurusd.change)}"></span>
  `;

  document.getElementById("crypto").innerHTML = `
    Bitcoin: ‚Ç¨${data.crypto.bitcoin.price}
    <span class="ampel ${ampel(data.crypto.bitcoin.change)}"></span>
    <a class="info-link" href="https://www.coingecko.com/de/munze/bitcoin" target="_blank">Info</a><br>
    Nexo: ‚Ç¨${data.crypto.nexo.price}
    <span class="ampel ${ampel(data.crypto.nexo.change)}"></span>
    <a class="info-link" href="https://www.coingecko.com/de/munze/nexo" target="_blank">Info</a>
  `;

  document.getElementById("weather").innerHTML = `
    <div class="weather-main">
      ${weatherIcon(data.weather.code)} ${data.weather.temp}¬∞C
    </div>
    <div class="weather-row">
      <div class="weather-box">
        09:00<br>
        ${weatherIcon(data.weather.trend.morning.code)}<br>
        ${data.weather.trend.morning.temp}¬∞C
      </div>
      <div class="weather-box">
        15:00<br>
        ${weatherIcon(data.weather.trend.afternoon.code)}<br>
        ${data.weather.trend.afternoon.temp}¬∞C
      </div>
      <div class="weather-box">
        21:00<br>
        ${weatherIcon(data.weather.trend.evening.code)}<br>
        ${data.weather.trend.evening.temp}¬∞C
      </div>
    </div>
  `;
}

loadData();
</script>

</body>
</html>
